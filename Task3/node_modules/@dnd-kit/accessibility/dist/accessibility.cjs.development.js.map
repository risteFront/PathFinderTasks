{"version":3,"file":"accessibility.cjs.development.js","sources":["../src/components/HiddenText/HiddenText.tsx","../src/components/LiveRegion/LiveRegion.tsx","../src/hooks/useAnnouncement.ts"],"sourcesContent":["import React from 'react';\n\ninterface Props {\n  id: string;\n  value: string;\n}\n\nconst hiddenStyles: React.CSSProperties = {\n  display: 'none',\n};\n\nexport function HiddenText({id, value}: Props) {\n  return (\n    <div id={id} style={hiddenStyles}>\n      {value}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport interface Props {\n  id: string;\n  entries: [NodeJS.Timeout, string][];\n}\n\n// Hide element visually but keep it readable by screen readers\nconst visuallyHidden: React.CSSProperties = {\n  position: 'absolute',\n  width: 1,\n  height: 1,\n  margin: -1,\n  border: 0,\n  padding: 0,\n  overflow: 'hidden',\n  clip: 'rect(0 0 0 0)',\n  clipPath: 'inset(100%)',\n};\n\nexport function LiveRegion({id, entries}: Props) {\n  return (\n    <div\n      id={id}\n      style={visuallyHidden}\n      aria-live=\"assertive\"\n      aria-relevant=\"additions\"\n      aria-atomic\n    >\n      {entries.map(([id, entry]) => (\n        <span key={id.toString()}>{entry}</span>\n      ))}\n    </div>\n  );\n}\n","import {useCallback, useEffect, useMemo, useRef, useState} from 'react';\n\nconst timeout = 1e3; // 1 second\n\nexport function useAnnouncement() {\n  const [announcementMap, setAnnouncements] = useState(\n    new Map<NodeJS.Timeout, string>()\n  );\n  const announce = useCallback((announcement: string) => {\n    setAnnouncements((announcements) => {\n      const timeoutId = setTimeout(() => {\n        setAnnouncements((announcements) => {\n          announcements.delete(timeoutId);\n\n          return new Map(announcements);\n        });\n      }, timeout);\n\n      announcements.set(timeoutId, announcement);\n\n      return new Map(announcements);\n    });\n  }, []);\n  const announcementMapRef = useRef(announcementMap);\n  const entries = useMemo(() => Array.from(announcementMap.entries()), [\n    announcementMap,\n  ]);\n\n  useEffect(() => {\n    announcementMapRef.current = announcementMap;\n  }, [announcementMap]);\n\n  useEffect(() => {\n    return () => {\n      // Clean up any queued `setTimeout` calls on unmount\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      announcementMapRef.current.forEach((_, key) => {\n        clearTimeout(key);\n      });\n    };\n  }, []);\n\n  return {announce, entries} as const;\n}\n"],"names":["hiddenStyles","display","HiddenText","id","value","React","style","visuallyHidden","position","width","height","margin","border","padding","overflow","clip","clipPath","LiveRegion","entries","map","entry","key","toString","timeout","useAnnouncement","useState","Map","announcementMap","setAnnouncements","announce","useCallback","announcement","announcements","timeoutId","setTimeout","set","announcementMapRef","useRef","useMemo","Array","from","useEffect","current","forEach","_","clearTimeout"],"mappings":";;;;;;;;;AAOA,IAAMA,YAAY,GAAwB;AACxCC,EAAAA,OAAO,EAAE;AAD+B,CAA1C;SAIgBC;MAAYC,UAAAA;MAAIC,aAAAA;AAC9B,SACEC,4BAAA,MAAA;AAAKF,IAAAA,EAAE,EAAEA;AAAIG,IAAAA,KAAK,EAAEN;GAApB,EACGI,KADH,CADF;AAKD;;ACTD,IAAMG,cAAc,GAAwB;AAC1CC,EAAAA,QAAQ,EAAE,UADgC;AAE1CC,EAAAA,KAAK,EAAE,CAFmC;AAG1CC,EAAAA,MAAM,EAAE,CAHkC;AAI1CC,EAAAA,MAAM,EAAE,CAAC,CAJiC;AAK1CC,EAAAA,MAAM,EAAE,CALkC;AAM1CC,EAAAA,OAAO,EAAE,CANiC;AAO1CC,EAAAA,QAAQ,EAAE,QAPgC;AAQ1CC,EAAAA,IAAI,EAAE,eARoC;AAS1CC,EAAAA,QAAQ,EAAE;AATgC,CAA5C;AAYA,SAAgBC;MAAYd,UAAAA;MAAIe,eAAAA;AAC9B,SACEb,4BAAA,MAAA;AACEF,IAAAA,EAAE,EAAEA;AACJG,IAAAA,KAAK,EAAEC;iBACG;qBACI;;GAJhB,EAOGW,OAAO,CAACC,GAAR,CAAY;AAAA,QAAEhB,EAAF;AAAA,QAAMiB,KAAN;AAAA,WACXf,4BAAA,OAAA;AAAMgB,MAAAA,GAAG,EAAElB,EAAE,CAACmB,QAAH;KAAX,EAA2BF,KAA3B,CADW;AAAA,GAAZ,CAPH,CADF;AAaD;;AChCD,IAAMG,OAAO,GAAG,GAAhB;;AAEA,SAAgBC;kBAC8BC,cAAQ,CAClD,IAAIC,GAAJ,EADkD;MAA7CC;MAAiBC;;AAGxB,MAAMC,QAAQ,GAAGC,iBAAW,CAAC,UAACC,YAAD;AAC3BH,IAAAA,gBAAgB,CAAC,UAACI,aAAD;AACf,UAAMC,SAAS,GAAGC,UAAU,CAAC;AAC3BN,QAAAA,gBAAgB,CAAC,UAACI,aAAD;AACfA,UAAAA,aAAa,UAAb,CAAqBC,SAArB;AAEA,iBAAO,IAAIP,GAAJ,CAAQM,aAAR,CAAP;AACD,SAJe,CAAhB;AAKD,OAN2B,EAMzBT,OANyB,CAA5B;AAQAS,MAAAA,aAAa,CAACG,GAAd,CAAkBF,SAAlB,EAA6BF,YAA7B;AAEA,aAAO,IAAIL,GAAJ,CAAQM,aAAR,CAAP;AACD,KAZe,CAAhB;AAaD,GAd2B,EAczB,EAdyB,CAA5B;AAeA,MAAMI,kBAAkB,GAAGC,YAAM,CAACV,eAAD,CAAjC;AACA,MAAMT,OAAO,GAAGoB,aAAO,CAAC;AAAA,WAAMC,KAAK,CAACC,IAAN,CAAWb,eAAe,CAACT,OAAhB,EAAX,CAAN;AAAA,GAAD,EAA8C,CACnES,eADmE,CAA9C,CAAvB;AAIAc,EAAAA,eAAS,CAAC;AACRL,IAAAA,kBAAkB,CAACM,OAAnB,GAA6Bf,eAA7B;AACD,GAFQ,EAEN,CAACA,eAAD,CAFM,CAAT;AAIAc,EAAAA,eAAS,CAAC;AACR,WAAO;AACL;AACA;AACAL,MAAAA,kBAAkB,CAACM,OAAnB,CAA2BC,OAA3B,CAAmC,UAACC,CAAD,EAAIvB,GAAJ;AACjCwB,QAAAA,YAAY,CAACxB,GAAD,CAAZ;AACD,OAFD;AAGD,KAND;AAOD,GARQ,EAQN,EARM,CAAT;AAUA,SAAO;AAACQ,IAAAA,QAAQ,EAARA,QAAD;AAAWX,IAAAA,OAAO,EAAPA;AAAX,GAAP;AACD;;;;;;"}